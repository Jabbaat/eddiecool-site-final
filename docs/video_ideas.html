<!DOCTYPE html>
<html lang="nl">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SYG5T1Z0MV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SYG5T1Z0MV');
</script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé¨ Video Idea Generator</title>
    <link rel="stylesheet" href="style.css"> </head>
<body>

    <nav>
        <div class="logo">
            <a href="index.html">
                <img src="images/logo.png" alt="Eddiecool Logo" class="logo-img">
            </a>
        </div>
        <span class="hamburger" id="hamburger-menu">&#9776;</span>
        <ul class="menu">
            <li><a href="index.html">üè† Home</a></li>
            <li><a href="projects.html">‚ú® Projects</a></li>
            <li><a href="ai_gallery.html">üé® Gallery</a></li>
            <li><a href="video_ideas.html">üé¨ Video Ideas</a></li>
            <li><a href="about.html">üí° About</a></li>
            <li><a href="contact.html">‚úâÔ∏è Contact</a></li>
        </ul>
    </nav>

    <div class="container">
        <h1>üé¨ Video Idea Generator</h1>
        <p>Type in a mood or theme to start generating video ideas. You can keep chatting to refine your ideas!</p>
        
        <div id="chatDisplay" class="chat-display">
            </div>

        <div class="chat-input-area">
            <input type="text" id="userInput" placeholder="E.g., space horror film with a time loop">
            <button id="sendButton">Generate Idea</button>
        </div>
        <button id="clearChatButton" class="clear-chat-button">Clear Chat</button>
    </div>

<script>
    // Array om de chatgeschiedenis bij te houden in het formaat dat de Gemini API verwacht
    let chatMessages = [];

    // Verwijzingen naar HTML-elementen
    const userInput = document.getElementById("userInput");
    const sendButton = document.getElementById("sendButton");
    const chatDisplay = document.getElementById("chatDisplay");
    const clearChatButton = document.getElementById("clearChatButton");
    const hamburgerMenu = document.getElementById("hamburger-menu");
    const navMenu = document.querySelector(".menu");

    // Event listener voor het hamburger menu
    hamburgerMenu.addEventListener("click", function() {
        navMenu.classList.toggle("active");
    });

    // Functie om berichten weer te geven in de chatDisplay
    function displayMessage(role, text) {
        const messageDiv = document.createElement('div');
        messageDiv.classList.add('chat-message', `${role}-message`);
        messageDiv.innerHTML = `<strong>${role === 'user' ? 'You' : 'AI'}:</strong> ${text}`;
        chatDisplay.appendChild(messageDiv);
        chatDisplay.scrollTop = chatDisplay.scrollHeight; // Scroll naar beneden
    }

    // Functie om de chat te wissen
    function clearChat() {
        chatMessages = []; // Leeg de geschiedenis
        chatDisplay.innerHTML = ''; // Leeg de weergave
        displayMessage('ai', 'Chat cleared! How can I help you today?'); // Startbericht
    }

    // Functie om een idee te genereren (nu voor de chat)
    async function generateIdea() {
        const userText = userInput.value.trim();
        if (!userText) return; // Doe niets als invoer leeg is

        displayMessage('user', userText); // Toon gebruikersbericht direct
        chatMessages.push({ role: "user", parts: [{ text: userText }] }); // Voeg toe aan geschiedenis

        userInput.value = ''; // Leeg het invoerveld
        userInput.disabled = true; // Schakel invoer uit tijdens AI-denken
        sendButton.disabled = true; // Schakel knop uit
        displayMessage('ai', 'AI is thinking...'); // Toon laadbericht

        try {
            const response = await fetch("https://video-ideas-generator-api.onrender.com/generate", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ messages: chatMessages }) // Stuur HELE geschiedenis
            });

            const data = await response.json();
            const aiResponse = data.result || "Something went wrong üòÖ";
            
            // Verwijder het 'AI is thinking...' bericht
            chatDisplay.removeChild(chatDisplay.lastChild); 

            displayMessage('ai', aiResponse); // Toon AI-antwoord
            chatMessages.push({ role: "model", parts: [{ text: aiResponse }] }); // Voeg AI-antwoord toe aan geschiedenis

        } catch (error) {
            console.error("Error generating idea:", error);
            // Verwijder het 'AI is thinking...' bericht
            chatDisplay.removeChild(chatDisplay.lastChild); 
            displayMessage('ai', 'An error occurred. Please try again.');
        } finally {
            userInput.disabled = false; // Schakel invoer weer in
            sendButton.disabled = false; // Schakel knop weer in
            userInput.focus(); // Focus terug op invoerveld
        }
    }

    // Event listeners
    sendButton.addEventListener('click', generateIdea);
    userInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            generateIdea();
        }
    });
    clearChatButton.addEventListener('click', clearChat);

    // Initialiseer de chat met een welkomstbericht
    document.addEventListener('DOMContentLoaded', function() {
        displayMessage('ai', 'Hello! I am your AI Video Idea Generator. Tell me your theme or mood!');
    });
</script>

</body>
</html>



