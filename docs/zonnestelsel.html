<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fotorealistisch 3D Zonnestelsel</title>
    
    <!-- Scripts voor de 3D simulatie -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/TextureLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/objects/Lensflare.js"></script>

    <style>
        /* Basis stijlen voor de simulatie */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; overflow: hidden; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: white; }
        #canvas-container { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; cursor: grab; z-index: 1; }
        #canvas-container:active { cursor: grabbing; }
        
        /* Stijlen voor de UI panelen */
        .ui-panel {
            position: absolute; z-index: 100; background: rgba(0, 0, 0, 0.8);
            padding: 20px; border-radius: 15px; backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.3); box-shadow: 0 0 25px rgba(255, 215, 0, 0.1);
        }
        .controls { top: 20px; left: 20px; }
        .navigation-help { bottom: 20px; left: 20px; padding: 15px; }
        .ui-panel h3, .ui-panel h4 { color: #ffd700; margin-bottom: 15px; font-weight: 600; }
        .control-group { margin: 15px 0; }
        .control-group label { display: block; margin-bottom: 8px; color: #ccc; font-size: 14px; }
        .control-group input[type="range"] { width: 220px; }
        .loading {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: #ffd700; font-size: 24px; z-index: 1000;
        }
        .label {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            text-shadow: 0 0 5px #000;
            font-size: 16px;
            z-index: 101;
        }

        /* --- Stijlen voor de Info Pop-up (Modal) --- */
        #info-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 300;
            display: none; /* Standaard verborgen */
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }
        .planet-info {
            position: relative; /* Nodig voor de sluitknop */
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        #close-info-btn {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 2.5rem;
            color: #fff;
            cursor: pointer;
            line-height: 1;
        }
        #planetDetails h4 { margin: 0 0 10px 0; font-size: 20px; padding-right: 30px; }
        #planetDetails p { margin: 0; line-height: 1.5; font-size: 15px; }
        
        /* --- MOBIELVRIENDELIJKE STIJLEN --- */
        @media (max-width: 768px) {
            .controls {
                top: 10px;
                left: 10px;
                right: 10px;
                width: auto;
                padding: 15px;
            }
            .navigation-help {
                display: none; /* Verberg hulp op mobiel om ruimte te besparen */
            }
            .ui-panel h3 {
                font-size: 1.1rem;
            }
            .control-group input[type="range"] {
                width: 100%;
            }
            .label {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Elementen van de Zonnestelsel App -->
    <div class="loading" id="loading">Zonnestelsel wordt geladen...</div>
    <div id="canvas-container"></div>
    <div class="ui-panel controls">
        <h3>üöÄ Zonnestelsel Controles</h3>
        <div class="control-group">
            <label>Simulatiesnelheid: <span id="speedValue">1.0x</span></label>
            <input type="range" id="speedControl" min="0" max="10" step="0.1" value="1">
        </div>
        <div class="control-group">
            <label><input type="checkbox" id="showOrbits" checked> Toon banen</label>
        </div>
        <div class="control-group">
            <label><input type="checkbox" id="showNames" checked> Toon namen</label>
        </div>
    </div>
    
    <!-- Info paneel zit nu in een overlay voor de pop-up -->
    <div id="info-modal-overlay">
        <div class="ui-panel planet-info">
            <span id="close-info-btn">&times;</span>
            <div id="planetDetails">Klik op een hemellichaam voor leuke weetjes.</div>
        </div>
    </div>

    <div class="ui-panel navigation-help">
        <h4>‚å®Ô∏è Navigatie</h4>
        <p>üñ±Ô∏è Linkermuisknop: Roteer camera</p>
        <p>üñ±Ô∏è Rechtermuisknop: Pan camera</p>
        <p>‚ö™ Scroll: Zoom in/uit</p>
        <p>‚å®Ô∏è Spatie: Pauzeer/start</p>
    </div>

    <script>
        // ----- BEGIN ZONNESTELSEL SCRIPT -----
        let scene, camera, renderer, controls;
        let sun, sunLight;
        let celestialObjects = [];
        let orbits = [];
        let labels = [];
        let asteroids = [];
        let animationSpeed = 1;
        let isPaused = false;
        const textureLoader = new THREE.TextureLoader();

        const celestialData = [
            { name: 'Mercurius', distance: 15, size: 0.8, tilt: 0.03, color: 0x8C7853, texture: 'https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/mercurymap.jpg', speed: 4.74, rotationSpeed: 0.01, facts: ['Een dag duurt er langer dan een jaar.', 'Het is de kleinste planeet in ons zonnestelsel.', 'De temperatuurverschillen zijn extreem: van 430¬∞C tot -180¬∞C.', 'Mercurius heeft een verrassend sterk magnetisch veld.', 'De planeet krimpt langzaam maar zeker.', 'Het oppervlak lijkt sterk op dat van onze maan.', 'Er is ijs gevonden in kraters op de polen.', 'Mercurius heeft geen manen of ringen.', 'De ijzeren kern is relatief gezien enorm groot.', 'Vanaf Mercurius lijkt de zon drie keer zo groot als vanaf de Aarde.'] },
            { name: 'Venus', distance: 20, size: 1.2, tilt: 177.0, color: 0xFFB649, texture: 'https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/venusmap.jpg', speed: 3.50, rotationSpeed: -0.007, facts: ['Het is de heetste planeet, heter dan Mercurius.', 'De atmosferische druk is 92 keer zo hoog als op Aarde.', 'Venus draait achterstevoren in vergelijking met de meeste planeten.', 'Een dag op Venus duurt langer dan een jaar op Venus.', 'De lucht is er gevuld met wolken van zwavelzuur.', 'Het is het helderste object aan de hemel na de zon en de maan.', 'Er zijn duizenden vulkanen op het oppervlak.', 'Venus heeft geen manen.', 'De planeet wordt soms de "kwaadaardige tweeling" van de Aarde genoemd.', 'De eerste succesvolle landing op een andere planeet was op Venus.'] },
            { name: 'Aarde', distance: 25, size: 1.3, tilt: 23.44, color: 0x6B93D6, texture: 'https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/earthmap1k.jpg', speed: 2.98, rotationSpeed: 0.02, facts: ['De enige planeet met vloeibaar water op het oppervlak.', 'De atmosfeer beschermt ons tegen meteoren en straling.', 'De Aarde is de dichtste planeet in het zonnestelsel.', 'De rotatie van de Aarde vertraagt heel langzaam.', '70% van het oppervlak is bedekt met water.', 'De Aarde heeft een krachtig magnetisch veld.', 'De hoogste berg op Aarde is de Mount Everest.', 'De Aarde is niet perfect rond, maar een afgeplatte sfero√Øde.', 'Onze planeet is ongeveer 4,5 miljard jaar oud.', 'De naam "Aarde" is de enige die niet uit de Griekse/Romeinse mythologie komt.'], atmosphere: true },
            { name: 'Mars', distance: 30, size: 1.0, tilt: 25.19, color: 0xCD5C5C, texture: 'https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/marsmap1k.jpg', speed: 2.41, rotationSpeed: 0.018, facts: ['Mars heeft de hoogste vulkaan van het zonnestelsel: Olympus Mons.', 'De planeet heeft seizoenen, net als de Aarde.', 'Een dag op Mars duurt ongeveer 24,6 uur.', 'Stofstormen kunnen de hele planeet bedekken.', 'Mars heeft twee kleine manen: Phobos en Deimos.', 'De rode kleur komt door roest in de bodem.', 'Er zijn ijskappen op de polen van Mars.', 'In het verleden stroomde er vloeibaar water op Mars.', 'De zwaartekracht is er maar 38% van die op Aarde.', 'Er rijden momenteel meerdere robots rond op Mars.'] },
            { name: 'Jupiter', distance: 45, size: 4.0, tilt: 3.13, color: 0xD2691E, texture: 'https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/jupitermap.jpg', speed: 1.31, rotationSpeed: 0.04, facts: ['Jupiter is twee keer zo zwaar als alle andere planeten bij elkaar.', 'De Grote Rode Vlek is een storm die groter is dan de Aarde.', 'Een dag op Jupiter duurt minder dan 10 uur.', 'Jupiter heeft het sterkste magnetische veld van alle planeten.', 'De planeet heeft zwakke, nauwelijks zichtbare ringen.', 'Jupiter heeft minstens 79 manen.', 'De maan Ganymedes is groter dan de planeet Mercurius.', 'Jupiter beschermt de Aarde door kometen en astero√Øden af te vangen.', 'De planeet straalt meer warmte uit dan hij van de zon ontvangt.', 'Jupiter is een gasreus, zonder vast oppervlak.'] },
            { name: 'Saturnus', distance: 60, size: 3.5, tilt: 26.73, color: 0xFAB552, texture: 'https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/saturnmap.jpg', speed: 0.97, rotationSpeed: 0.038, facts: ['De ringen van Saturnus zijn extreem dun, soms maar 10 meter dik.', 'Saturnus heeft de laagste dichtheid; hij zou op water drijven.', 'Een jaar op Saturnus duurt meer dan 29 aardse jaren.', 'De winden kunnen er snelheden van 1.800 km/u bereiken.', 'Op de noordpool bevindt zich een mysterieuze zeshoekige storm.', 'De maan Titan heeft een dichte atmosfeer en meren van vloeibaar methaan.', 'Saturnus heeft 82 bekende manen.', 'De ringen bestaan voornamelijk uit ijsdeeltjes.', 'De planeet is zichtbaar met het blote oog vanaf de Aarde.', 'De Cassini-ruimtesonde heeft de planeet 13 jaar lang bestudeerd.'] },
            { name: 'Uranus', distance: 75, size: 2.5, tilt: 97.77, color: 0x4FD0E7, texture: 'https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/uranusmap.jpg', speed: 0.68, rotationSpeed: 0.03, facts: ['Uranus draait op zijn kant, met zijn polen naar de zon gericht.', 'Het is de koudste planeet in het zonnestelsel.', 'Een jaar op Uranus duurt 84 aardse jaren.', 'De blauwe kleur komt door methaan in de atmosfeer.', 'Uranus heeft 13 bekende, donkere ringen.', 'De manen zijn vernoemd naar personages van Shakespeare en Alexander Pope.', 'Uranus was de eerste planeet die met een telescoop werd ontdekt.', 'De seizoenen zijn extreem, met 42 jaar daglicht gevolgd door 42 jaar duisternis.', 'De planeet is een "ijsreus", bestaande uit water, methaan en ammoniak.', 'Slechts √©√©n ruimtesonde heeft Uranus ooit bezocht: Voyager 2.'] },
            { name: 'Neptunus', distance: 90, size: 2.4, tilt: 28.32, color: 0x4169E1, texture: 'https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/neptunemap.jpg', speed: 0.54, rotationSpeed: 0.032, facts: ['Neptunus heeft de snelste winden in het zonnestelsel, tot 2.100 km/u.', 'De planeet werd ontdekt door wiskundige berekeningen.', 'Een jaar op Neptunus duurt bijna 165 aardse jaren.', 'De grootste maan, Triton, draait in de verkeerde richting.', 'Neptunus is de kleinste van de gasreuzen.', 'De Grote Donkere Vlek was een storm vergelijkbaar met die van Jupiter.', 'De planeet is vernoemd naar de Romeinse god van de zee.', 'Het duurt 12 jaar voor een ruimtesonde om Neptunus te bereiken.', 'De blauwe kleur komt, net als bij Uranus, door methaan.', 'Neptunus heeft vijf zwakke ringen.'] },
            { name: 'Pluto', type: 'dwarf', distance: 105, size: 0.5, tilt: 122.53, color: 0xD3BBAF, texture: 'https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/plutomap1k.jpg', speed: 0.47, rotationSpeed: 0.005, facts: ['Pluto is kleiner dan onze eigen maan.', 'Het heeft een hartvormig gletsjergebied op zijn oppervlak.', 'Een jaar op Pluto duurt 248 aardse jaren.', 'Pluto heeft vijf manen.', 'De atmosfeer is alleen aanwezig als Pluto dicht bij de zon staat.', 'Zijn baan is zo excentriek dat hij soms dichter bij de zon staat dan Neptunus.', 'Pluto wordt nu geclassificeerd als een dwergplaneet.', 'De New Horizons-sonde deed er 9,5 jaar over om Pluto te bereiken.', 'De grootste maan, Charon, is bijna half zo groot als Pluto zelf.', 'De temperatuur op Pluto kan dalen tot -240¬∞C.'] }
        ];
        const sunFacts = ['De zon bevat 99,86% van alle massa in het zonnestelsel.', 'Elke seconde zet de zon 600 miljoen ton waterstof om in helium.', 'Het licht van de zon doet er 8 minuten en 20 seconden over om de aarde te bereiken.', 'De kern van de zon is 15 miljoen graden Celsius.', 'De zon is een middelgrote ster, een zogenaamde "gele dwerg".', 'Een miljoen aardes zouden in de zon passen.', 'De zon draait eens in de 25-35 dagen om zijn as.', 'De zon genereert een constante stroom van deeltjes, de zonnewind.', 'Zonnevlammen kunnen communicatie op Aarde verstoren.', 'Over 5 miljard jaar zal de zon opzwellen tot een rode reus.'];

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 3000);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x000005);
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.minDistance = 20;
            controls.maxDistance = 500;

            addStars();
            createSun();
            createCelestialBodies();
            createAsteroidBelt();

            camera.position.set(0, 80, 150);
            controls.update();

            setupEventListeners();
            document.getElementById('loading').style.display = 'none';
            animate();
        }

        function addStars() {
            const starsGeometry = new THREE.BufferGeometry();
            const starsVertices = [];
            for (let i = 0; i < 10000; i++) {
                const x = THREE.MathUtils.randFloatSpread(2500);
                const y = THREE.MathUtils.randFloatSpread(2500);
                const z = THREE.MathUtils.randFloatSpread(2500);
                starsVertices.push(x, y, z);
            }
            starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
            const starsMaterial = new THREE.PointsMaterial({ color: 0xAAAAAA, size: 0.7 });
            scene.add(new THREE.Points(starsGeometry, starsMaterial));
        }

        function createSun() {
            const sunMaterial = new THREE.MeshBasicMaterial({ color: 0xFFD700 });
            
            textureLoader.load(
                'https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/sunmap.jpg',
                (texture) => { sunMaterial.map = texture; sunMaterial.color.set(0xffffff); sunMaterial.needsUpdate = true; },
                undefined,
                (err) => { console.error('Kon zon textuur niet laden, fallback naar kleur.', err); }
            );

            sun = new THREE.Mesh(new THREE.SphereGeometry(7, 64, 64), sunMaterial);
            celestialObjects.push(sun);
            scene.add(sun);

            sunLight = new THREE.PointLight(0xffffff, 2, 3000);
            scene.add(sunLight);
            
            const flareTexture = textureLoader.load('https://threejs.org/examples/textures/lensflare/lensflare0.png');
            const lensflare = new THREE.Lensflare();
            lensflare.addElement(new THREE.LensflareElement(flareTexture, 700, 0, sunLight.color));
            sunLight.add(lensflare);
        }

        function createCelestialBodies() {
            celestialData.forEach(data => {
                const material = new THREE.MeshStandardMaterial({ color: data.color });
                const planet = new THREE.Mesh(new THREE.SphereGeometry(data.size, 32, 32), material);
                
                textureLoader.load(data.texture,
                    (texture) => { planet.material.map = texture; planet.material.color.set(0xffffff); planet.material.needsUpdate = true; },
                    undefined,
                    (err) => { console.error(`Kon textuur niet laden voor ${data.name}:`, err); }
                );
                
                planet.rotation.z = THREE.MathUtils.degToRad(data.tilt);
                planet.position.x = data.distance;
                planet.userData = { ...data, angle: Math.random() * Math.PI * 2, mesh: planet };
                scene.add(planet);
                celestialObjects.push(planet);

                createOrbit(data.distance, data.type === 'dwarf' ? 0x666666 : 0x333333);
                createLabel(data.name, planet, 0xFFFFFF);

                if (data.name === 'Saturnus') createSaturnRings(planet, data.size);
                if (data.name === 'Aarde') {
                    createMoon(planet, 3, 0.3, 'https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/moonmap1k.jpg', 20);
                    createAtmosphere(planet, data.size);
                }
                if (data.name === 'Mars') {
                    createMoon(planet, 2.0, 0.1, 0xAAAAAA, 30);
                    createMoon(planet, 2.8, 0.15, 0x999999, 45);
                }
            });
        }
        
        function createAtmosphere(parent, size) {
            const atmosphereMaterial = new THREE.MeshBasicMaterial({
                color: 0x6B93D6,
                transparent: true,
                opacity: 0.2,
                side: THREE.BackSide
            });
            const atmosphere = new THREE.Mesh(new THREE.SphereGeometry(size + 0.1, 32, 32), atmosphereMaterial);
            parent.add(atmosphere);
        }

        function createMoon(parent, distance, size, textureOrColor, speed) {
            let moonMaterial;
            if (typeof textureOrColor === 'string' && textureOrColor.startsWith('http')) {
                const moonTexture = textureLoader.load(textureOrColor);
                moonMaterial = new THREE.MeshStandardMaterial({ map: moonTexture });
            } else {
                moonMaterial = new THREE.MeshStandardMaterial({ color: textureOrColor });
            }
            const moon = new THREE.Mesh(new THREE.SphereGeometry(size, 16, 16), moonMaterial);
            moon.position.x = distance;
            parent.add(moon);
            
            if (!parent.userData.moons) parent.userData.moons = [];
            parent.userData.moons.push({ mesh: moon, distance: distance, speed: speed, angle: Math.random() * Math.PI * 2 });
        }

        function createAsteroidBelt() {
            const beltMaterial = new THREE.MeshStandardMaterial({ color: 0x8B4513, roughness: 0.8 });
            for (let i = 0; i < 1500; i++) {
                const size = Math.random() * 0.2 + 0.05;
                const asteroid = new THREE.Mesh(new THREE.DodecahedronGeometry(size, 0), beltMaterial);
                const angle = Math.random() * Math.PI * 2;
                const distance = 34 + Math.random() * 8;
                asteroid.position.set(Math.cos(angle) * distance, (Math.random() - 0.5) * 2, Math.sin(angle) * distance);
                asteroid.userData = { distance, angle, speed: (Math.random() * 0.2 + 0.8) * 1.5 };
                asteroids.push(asteroid);
                scene.add(asteroid);
            }
        }
        
        function createOrbit(distance, color) {
            const points = [];
            for (let i = 0; i <= 128; i++) {
                const angle = (i / 128) * Math.PI * 2;
                points.push(new THREE.Vector3(Math.cos(angle) * distance, 0, Math.sin(angle) * distance));
            }
            const orbitGeometry = new THREE.BufferGeometry().setFromPoints(points);
            const orbitMaterial = new THREE.LineBasicMaterial({ color: color, transparent: true, opacity: 0.5 });
            const orbit = new THREE.Line(orbitGeometry, orbitMaterial);
            scene.add(orbit);
            orbits.push(orbit);
        }

        function createSaturnRings(planet, planetSize) {
            const ringTexture = textureLoader.load('https://raw.githubusercontent.com/jeromeetienne/threex.planets/master/images/saturnring.png');
            const ringMaterial = new THREE.MeshBasicMaterial({
                map: ringTexture,
                side: THREE.DoubleSide,
                transparent: true,
                opacity: 0.8
            });
            const rings = new THREE.Mesh(new THREE.RingGeometry(planetSize + 0.5, planetSize + 3.5, 64), ringMaterial);
            rings.rotation.x = -Math.PI / 2;
            planet.add(rings);
        }

        function createLabel(text, object, color) {
            const div = document.createElement('div');
            div.className = 'label';
            div.textContent = text;
            div.style.color = `#${color.toString(16)}`;
            document.body.appendChild(div);
            labels.push({ div, object });
        }

        function setupEventListeners() {
            document.getElementById('speedControl').addEventListener('input', e => {
                animationSpeed = parseFloat(e.target.value);
                document.getElementById('speedValue').textContent = animationSpeed.toFixed(1) + 'x';
            });
            document.getElementById('showOrbits').addEventListener('change', e => orbits.forEach(o => o.visible = e.target.checked));
            document.getElementById('showNames').addEventListener('change', e => labels.forEach(l => l.div.style.display = e.target.checked ? 'block' : 'none'));
            document.addEventListener('keydown', e => { if (e.code === 'Space') isPaused = !isPaused; });

            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();
            renderer.domElement.addEventListener('click', e => {
                mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
                raycaster.setFromCamera(mouse, camera);
                const intersects = raycaster.intersectObjects(celestialObjects);
                if (intersects.length > 0) showPlanetInfo(intersects[0].object);
            });

            const modalOverlay = document.getElementById('info-modal-overlay');
            document.getElementById('close-info-btn').addEventListener('click', () => {
                modalOverlay.style.display = 'none';
            });
            modalOverlay.addEventListener('click', (e) => {
                if (e.target === modalOverlay) {
                    modalOverlay.style.display = 'none';
                }
            });

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        function showPlanetInfo(planet) {
            const modalOverlay = document.getElementById('info-modal-overlay');
            const infoDiv = document.getElementById('planetDetails');
            let html = 'Selecteer een object.';
            let factsArray = [];

            if (planet === sun) {
                factsArray = sunFacts;
            } else if (planet.userData && planet.userData.facts) {
                factsArray = planet.userData.facts;
            }

            if (factsArray.length > 0) {
                const randomFact = factsArray[Math.floor(Math.random() * factsArray.length)];
                const data = planet.userData;
                const emoji = (planet === sun) ? '‚òÄÔ∏è' : (data.type === 'dwarf' ? '‚òÑÔ∏è' : 'ü™ê');
                const name = (planet === sun) ? 'Zon' : data.name;
                const color = (planet === sun) ? 'FFD700' : data.color.toString(16);

                html = `<h4 style="color:#${color}">${emoji} ${name}</h4><p>${randomFact}</p>`;
            }
            
            infoDiv.innerHTML = html;
            modalOverlay.style.display = 'flex';
        }

        function updateLabels() {
            labels.forEach(labelData => {
                const { div, object } = labelData;
                const pos = new THREE.Vector3();
                object.getWorldPosition(pos);
                pos.project(camera);
                const x = (pos.x * 0.5 + 0.5) * window.innerWidth;
                const y = (pos.y * -0.5 + 0.5) * window.innerHeight;
                div.style.display = (pos.z < 1 && document.getElementById('showNames').checked) ? 'block' : 'none';
                div.style.transform = `translate(-50%, -150%) translate(${x}px, ${y}px)`;
            });
        }
        
        function animate() {
            requestAnimationFrame(animate);

            if (!isPaused) {
                const speedFactor = 0.1 * animationSpeed;
                sun.rotation.y += 0.001 * animationSpeed;

                celestialObjects.forEach(obj => {
                    if (!obj.userData.distance) return;
                    const data = obj.userData;
                    data.angle += (data.speed * 0.01 * speedFactor);
                    obj.position.set(Math.cos(data.angle) * data.distance, 0, Math.sin(data.angle) * data.distance);
                    obj.rotation.y += data.rotationSpeed * animationSpeed;

                    if (data.moons) {
                        data.moons.forEach(moonData => {
                            moonData.angle += (moonData.speed * 0.01 * speedFactor);
                            moonData.mesh.position.set(Math.cos(moonData.angle) * moonData.distance, 0, Math.sin(moonData.angle) * moonData.distance);
                        });
                    }
                });
                
                asteroids.forEach(asteroid => {
                    const data = asteroid.userData;
                    data.angle += (data.speed * 0.01 * speedFactor);
                    asteroid.position.x = Math.cos(data.angle) * data.distance;
                    asteroid.position.z = Math.sin(data.angle) * data.distance;
                    asteroid.rotation.x += 0.01 * animationSpeed;
                    asteroid.rotation.y += 0.01 * animationSpeed;
                });
            }

            controls.update();
            updateLabels();
            renderer.render(scene, camera);
        }

        window.addEventListener('load', init);
        // ----- EINDE ZONNESTELSEL SCRIPT -----
    </script>
</body>
</html>
